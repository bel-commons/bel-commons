sudo: false
cache: pip

services:
  - mysql

language: python

python:
    - 3.6

env:
  global:
    - PYBEL_TEST_CONNECTOR=pymysql
    - PYBEL_TEST_CONNECTION=mysql+pymysql://travis@localhost/test?charset=utf8
  matrix:
    - TOXENV=py
    - TOXENV=docs
    - TOXENV=manifest
    - TOXENV=rst-lint

before_script:
  - mysql -e 'CREATE DATABASE test CHARACTER SET utf8 COLLATE utf8_general_ci;'
  - mysql -e "GRANT ALL PRIVILEGES ON test.* to 'travis'@'%' WITH GRANT OPTION;"

before_install:
    - pip install --upgrade pip
    - pip install codecov

install:
    - pip install tox

script:
    - tox

after_success:
    - tox -e coverage-report
    - codecov

notifications:
  slack: pybel:n2KbWKBum3musnBg3L76gGwq
